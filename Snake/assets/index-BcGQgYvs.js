(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&l(d)}).observe(document,{childList:!0,subtree:!0});function s(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(o){if(o.ep)return;o.ep=!0;const r=s(o);fetch(o.href,r)}})();const c=document.getElementById("game"),a=c.getContext("2d"),R=document.getElementById("score"),O=document.getElementById("best"),E=document.getElementById("pauseBtn"),T=document.getElementById("resetBtn"),f=24,x=Math.floor(c.width/f),p=Math.floor(c.height/f),v=120,i={UP:[0,-1],DOWN:[0,1],LEFT:[-1,0],RIGHT:[1,0]};let e,m=0,b=0,y=!1;function D(){const t={x:Math.floor(x/2),y:Math.floor(p/2)};return{snake:[t,{x:t.x-1,y:t.y},{x:t.x-2,y:t.y}],dir:i.RIGHT,nextDir:i.RIGHT,food:L(new Set),score:0,best:Number(localStorage.getItem("best")||0),dead:!1}}function L(t){for(;;){const n=Math.floor(Math.random()*x),s=Math.floor(Math.random()*p),l=`${n},${s}`;if(!t.has(l))return{x:n,y:s}}}function k(t){if(y||e.dead||(m+=t,m<v))return;m=0;const[n,s]=e.nextDir,l=e.snake[0],o=l.x+n,r=l.y+s,d=o<0||r<0||o>=x||r>=p,g=e.snake.some(h=>h.x===o&&h.y===r);if(d||g){e.dead=!0,localStorage.setItem("best",String(Math.max(e.best,e.score))),e.best=Number(localStorage.getItem("best"));return}if(e.snake.unshift({x:o,y:r}),o===e.food.x&&r===e.food.y){e.score+=1;const h=new Set(e.snake.map(w=>`${w.x},${w.y}`));e.food=L(h)}else e.snake.pop();e.dir=e.nextDir}function B(){a.clearRect(0,0,c.width,c.height),a.globalAlpha=.12;for(let t=0;t<=x;t++)a.fillRect(t*f,0,1,c.height);for(let t=0;t<=p;t++)a.fillRect(0,t*f,c.width,1);a.globalAlpha=1,I(e.food.x,e.food.y,"#22d3ee"),e.snake.forEach((t,n)=>I(t.x,t.y,n===0?"#a78bfa":"#8b5cf6")),e.dead&&(a.fillStyle="rgba(0,0,0,.45)",a.fillRect(0,0,c.width,c.height),a.fillStyle="#e6edf3",a.textAlign="center",a.font="20px system-ui",a.fillText("Game Over â€” tap Restart",c.width/2,c.height/2)),R.textContent=e.score,O.textContent=Math.max(e.best,e.score)}function I(t,n,s){a.fillStyle=s,a.fillRect(t*f+2,n*f+2,f-4,f-4)}function M(t=0){const n=t-b;b=t,k(n),B(),requestAnimationFrame(M)}function S(){e=D(),m=0,b=0}S();requestAnimationFrame(M);addEventListener("keydown",t=>{const n=t.key.toLowerCase(),s={arrowup:i.UP,w:i.UP,arrowdown:i.DOWN,s:i.DOWN,arrowleft:i.LEFT,a:i.LEFT,arrowright:i.RIGHT,d:i.RIGHT};if(!s[n])return;const[l,o]=s[n],[r,d]=e.dir;l===-r&&o===-d||(e.nextDir=s[n])});let u=null;c.addEventListener("touchstart",t=>{u=t.touches[0]},{passive:!0});c.addEventListener("touchmove",t=>{if(!u)return;const n=t.touches[0].clientX-u.clientX,s=t.touches[0].clientY-u.clientY;if(Math.abs(n)+Math.abs(s)<24)return;const l=Math.abs(n)>Math.abs(s)?n>0?i.RIGHT:i.LEFT:s>0?i.DOWN:i.UP,[o,r]=l,[d,g]=e.dir;o===-d&&r===-g||(e.nextDir=l),u=t.touches[0]},{passive:!0});c.addEventListener("touchend",()=>{u=null});E.onclick=()=>{y=!y,E.textContent=y?"Resume":"Pause"};T.onclick=S;
